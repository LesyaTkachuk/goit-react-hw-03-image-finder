(this.webpackJsonpprelesson_5_api=this.webpackJsonpprelesson_5_api||[]).push([[0],{10:function(e,t,a){e.exports={item:"ImageGalleryItem_item__3LSdh",image:"ImageGalleryItem_image__2rXmA"}},11:function(e,t,a){e.exports={overlay:"Modal_overlay__1eogj",modal:"Modal_modal__1nBhR"}},12:function(e,t,a){e.exports={app:"App_app__dxBwA",img:"App_img__9teSa"}},25:function(e,t,a){e.exports={imageGallery:"ImageGallery_imageGallery__26TyE"}},26:function(e,t,a){e.exports={button:"Button_button__3T5D4"}},28:function(e,t,a){e.exports=a(74)},73:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(3),c=a.n(r),i=a(13),l=a(4),s=a(5),u=a(7),m=a(6),h=a(14),p=a(8),d=a.n(p),g=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={value:""},e.handleChange=function(t){e.setState({value:t.target.value})},e.handleSubmit=function(t){t.preventDefault();var a=e.state.value;e.props.onSubmit(a),e.setState({value:""})},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.state.value;return o.a.createElement("header",{className:d.a.searchBar},o.a.createElement("form",{className:d.a.searchForm,onSubmit:this.handleSubmit},o.a.createElement("button",{type:"submit",className:d.a.button},o.a.createElement("span",{className:d.a.label},"Search")),o.a.createElement("input",{className:d.a.input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:e,onChange:this.handleChange})))}}]),a}(n.Component),f=a(24),y=a.n(f),v=a(10),_=a.n(v);var b=function(e){var t=e.image,a=e.showModal,n=t.webformatURL,r=t.largeImageURL;return o.a.createElement("li",{className:_.a.item},o.a.createElement("img",{src:n,alt:"",className:_.a.image,onClick:function(){return a(r)}}))},w=a(25),E=a.n(w);var S=function(e){var t=e.images,a=e.showModal;return o.a.createElement("ul",{className:E.a.imageGallery},t.map((function(e){return o.a.createElement(b,{key:e.id,image:e,showModal:a})})))},k=a(26),N=a.n(k);var O=function(e){var t=e.onClick;return o.a.createElement("button",{type:"button",className:N.a.button,onClick:t},"Load more")},C=a(11),j=a.n(C),M=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).handleKeyDown=function(t){"Escape"===t.code&&e.props.onClose()},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){return o.a.createElement("div",{className:j.a.overlay},o.a.createElement("div",{className:j.a.modal},this.props.children))}}]),a}(n.Component),F=a(27),x=a.n(F);var B={fetchPicturesByQuery:function(e,t){return x.a.get("https://pixabay.com/api/?q=".concat(e,"&key=").concat("16289241-4573a8dd8ec62d75602da9e3c","&image_type=photo&orientation=horizontal&page=").concat(t,"&per_page=12")).then((function(e){return e.data.hits}))}};function I(){return window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}var L=a(12),q=a.n(L),U=(a(71),a(72),function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={images:[],query:"",isLoading:!1,page:1,imageUrlForModal:""},e.inputQuery=function(t){t?e.setState({query:t,images:[],page:1}):e.showNotif("Please, enter some query")},e.fetchImages=function(){e.setState({isLoading:!0});var t=e.state,a=t.query,n=t.page;B.fetchPicturesByQuery(a,n).then((function(t){0!==t.length?e.setState((function(e){return{images:[].concat(Object(i.a)(e.images),Object(i.a)(t)),page:e.page+1}})):e.showNotif("No matches")})).catch((function(t){return e.showNotif("Woops...".concat(t.message))})).finally((function(){e.setState({isLoading:!1}),I()}))},e.showNotif=function(t){e.setState({showNotif:!0}),h.b.dark("\ud83e\udd84 ".concat(t))},e.showModal=function(t){e.setState({imageUrlForModal:t})},e.closeModal=function(){e.setState({imageUrlForModal:""})},e}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=t.query,n=this.state.query;console.log(a),console.log(n),a!==n&&this.fetchImages()}},{key:"render",value:function(){var e=this.state,t=e.images,a=e.isLoading,n=e.imageUrlForModal;return o.a.createElement("div",{className:q.a.app},o.a.createElement(g,{onSubmit:this.inputQuery}),t.length>0&&o.a.createElement(S,{images:t,showModal:this.showModal}),a&&o.a.createElement(y.a,{type:"Puff",color:"#00BFFF",height:100,width:100,timeout:3e3}),t.length>0&&!a&&o.a.createElement(O,{onClick:this.fetchImages}),n&&o.a.createElement(M,{onClose:this.closeModal},o.a.createElement("img",{className:q.a.img,src:n,alt:"picture from the gallery"})),o.a.createElement(h.a,{position:"top-center",autoClose:5e3,newestOnTop:!1,closeOnClick:!0,pauseOnHover:!0}))}}]),a}(n.Component));a(73);c.a.render(o.a.createElement(U,null),document.getElementById("root"))},8:function(e,t,a){e.exports={searchBar:"Searchbar_searchBar__1tGqH",searchForm:"Searchbar_searchForm__3sZ5Q",button:"Searchbar_button__1qTkO",label:"Searchbar_label__3hXCe",input:"Searchbar_input__28SXJ"}}},[[28,1,2]]]);
//# sourceMappingURL=main.51daccd7.chunk.js.map